


{% extends 'authorized_base.html' %}

{% load static %}
{% block title %}Manager Dashboard{% endblock title %}

{% block content %}



<section class="container-fluid">
  <div class="row">
    <div class="col-12 col-sm-11 col-md-11 col-lg-12 col-xl-11 col-xxl-10 mx-auto">

      <div class="row">

        <!-- Sidebar -->
                  <div class="col-10 col-sm-10 col-md-10 col-lg-3 col-xl-3 mx-auto my-3 my-sm-3 my-md-3 ">
                    
<div class="d-flex flex-column pb-3 bg-light shadow position-sticky" style="top: 90px; ">
    
    <ul class="nav nav-pills flex-column mb-auto">


<div class="accordion" id="educationAccordion">
  <div class="accordion-item">
    <h2 class="accordion-header" id="educationHeadingOne">
      <button class="accordion-button {% if request.resolver_match.url_name in 'enrolled_student_list enrollment_summary student_enroll' %}{% else %}collapsed{% endif %}" 
              type="button" 
              data-bs-toggle="collapse" 
              data-bs-target="#educationCollapseOne" 
              aria-expanded="{% if request.resolver_match.url_name in 'enrolled_student_list enrollment_summary student_enroll' %}true{% else %}false{% endif %}" 
              aria-controls="educationCollapseOne">
        <i class="fa fa-graduation-cap me-2"></i> Education
      </button>
    </h2>
    <div id="educationCollapseOne" 
         class="accordion-collapse collapse {% if request.resolver_match.url_name in 'enrolled_student_list enrollment_summary student_enroll' %}show{% endif %}" 
         data-bs-parent="#educationAccordion">
      <div class="accordion-body p-0">
        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            <a href="{% url 'enrolled_student_list' %}" class="nav-link {% if request.resolver_match.url_name == 'enrolled_student_list' %}active{% endif %}">
              <i class="fas fa-file-alt"></i> Students
            </a>
          </li>
          <li class="list-group-item">
            <a href="{% url 'enrollment_summary' %}" class="nav-link {% if request.resolver_match.url_name == 'enrollment_summary' %}active{% endif %}">
              <i class="fas fa-file-alt"></i> Enrollment Summary</a>
          </li>
          <li class="list-group-item">
            <a href="{% url 'student_enroll' %}" class="nav-link {% if request.resolver_match.url_name == 'student_enroll' %}active{% endif %}">
              <i class="fas fa-file-alt"></i> Enrollments
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div class="accordion" id="admissionAccordion">
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingOne">
      <button class="accordion-button {% if request.resolver_match.url_name in 'applicant_status applicant_list send_message_to_applicants send_email_to_applicants written_attendance_pdf viva_attendance_pdf result_prepare' %}{% else %}collapsed{% endif %}" 
              type="button" 
              data-bs-toggle="collapse" 
              data-bs-target="#collapseTwo"
              aria-expanded="{% if request.resolver_match.url_name in 'applicant_status applicant_list send_message_to_applicants send_email_to_applicants written_attendance_pdf viva_attendance_pdf result_prepare' %}true{% else %}false{% endif %}" 
              aria-controls="collapseTwo">
       
<i class="fas fa-shield-alt me-2"></i> Admission

      </button>
    </h2>
    <div id="collapseTwo" 
         class="accordion-collapse collapse {% if request.resolver_match.url_name in 'applicant_status applicant_list send_message_to_applicants send_email_to_applicants written_attendance_pdf viva_attendance_pdf result_prepare' %}show{% endif %}" 
         data-bs-parent="#admissionAccordion">
      <div class="accordion-body p-0">
        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            <a href="{% url 'applicant_status' %}" class="nav-link {% if request.resolver_match.url_name == 'applicant_status' %}active{% endif %}">
              <i class="fas fa-file-alt"></i> Applicant Status
            </a>
          </li>
          <li class="list-group-item">
            <a href="{% url 'applicant_list' %}" class="nav-link {% if request.resolver_match.url_name == 'applicant_list' %}active{% endif %}">
              <i class="fas fa-users"></i> Applicants
            </a>
          </li>
          <li class="list-group-item">
            <a href="{% url 'send_message_to_applicants' %}" class="nav-link {% if request.resolver_match.url_name == 'send_message_to_applicants' %}active{% endif %}">
              <i class="fas fa-sms"></i> Send SMS
            </a>
          </li>
          <li class="list-group-item">
            <a href="{% url 'send_email_to_applicants' %}" class="nav-link {% if request.resolver_match.url_name == 'send_email_to_applicants' %}active{% endif %}">
              <i class="fas fa-envelope"></i> Send Email
            </a>
          </li>

          <li class="list-group-item">
            <a href="{% url 'written_attendance_pdf' %}" class="nav-link {% if request.resolver_match.url_name == 'written_attendance_pdf' %}active{% endif %}">
              <i class="fas fa-pen-alt"></i> Written Attendance

            </a>
          </li>



          <li class="list-group-item">
            <a href="{% url 'viva_attendance_pdf' %}" class="nav-link {% if request.resolver_match.url_name == 'viva_attendance_pdf' %}active{% endif %}">
              <i class="fas fa-microphone"></i> Viva Attendance

            </a>
          </li>

     
          <li class="list-group-item">
            <a href="{% url 'result_prepare' %}" class="nav-link {% if request.resolver_match.url_name == 'result_prepare' %}active{% endif %}">
              <i class="fas fa-chart-line"></i> Result Prepare
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>


      <li class="nav-item bg-white py-1 border border-1">
        <a href="{% url 'coustom_user_registration' %}" class="nav-link {% if request.resolver_match.url_name == 'coustom_user_registration' %}active{% endif %}">
          <i class="fas fa-file-alt"></i> Create User
        </a>
      </li>
      

      <li class="nav-item bg-white border border-1 py-1">
        <a href="{% url 'change_password' %}" class="nav-link {% if request.resolver_match.url_name == 'change_password' %}active{% endif %}">
          <i class="fas fa-file-alt"></i> Change Password
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="" onclick="confirmLogout(event)" >
            <i class="fas fa-door-open"></i> Logout
          </a>
      </li>
  
  
        </ul>
      </li>
      
  
      
      </li>
    </ul>
  </div>
  
  
                  </div>
              
               <!-- Main Content -->
                  <div class="col-12 col-sm-12  col-md-12 col-lg-9 col-xl-9 bg-white  flex-fill pt-2 pb-5 " >
                    {% block manager_dashboard %}

                    {% if active_password_change %}
                      {% include 'accounts/change_password.html' %}
                    {% else %}

 

  <div class="container-fluid vh-100 mt-5">
  <div class="row  justify-content-center text-center">
    <div class="col-12 mb-2">
      <h5 class="fw-semibold text-info">
        <i class="fas fa-chalkboard-teacher me-2"></i>
        Welcome to the WMES Program Manager Dashboard
      </h5>
    </div>

    <div class="col-auto d-flex flex-wrap justify-content-center gap-3">
      <span class="fw-semibold text-primary">
        <i class="fas fa-user-circle me-1"></i>
        {{ request.user.full_name }}
      </span>

      <span class="fw-semibold text-success">
        <i class="fas fa-phone me-1"></i>
        {{ request.user.mobile_number }}
      </span>
    </div>
  </div>
</div>








                    {% endif %}

                    
                    {% endblock %}
                  </div>

      </div>
    </div>
  </div>
</section>








<!-- js css section -->
<section class="css_js">


  <script>
    document.addEventListener('DOMContentLoaded', function () {
        const triggerTabList = document.querySelectorAll('.nav-link[data-bs-toggle="tab"]');

        // Restore last active tab from localStorage
        const activeTabId = localStorage.getItem('activeTab');
        if (activeTabId) {
            const someTabTriggerEl = document.querySelector(`.nav-link[href="${activeTabId}"]`);
            if (someTabTriggerEl) {
                new bootstrap.Tab(someTabTriggerEl).show();
            }
        }

        // Save selected tab to localStorage
        triggerTabList.forEach(function (triggerEl) {
            triggerEl.addEventListener('shown.bs.tab', function (event) {
                localStorage.setItem('activeTab', event.target.getAttribute('href'));
            });
        });
    });

    // Optional: Confirm logout
    function confirmLogout(event) {
        event.preventDefault();
        if (confirm("Are you sure you want to logout?")) {
            window.location.href = "{% url 'applicant_logout' %}";  
        }
    }
</script>




</section>


{% endblock content %}



